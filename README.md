Coronaシミュレータ
====

セルオートマトンで感染する様子をシミュレーションしてみました。

シミュレーション対象としては新型コロナウィルスを想定しますが、
パラメータに信頼ある数値を使用しているわけではないので、
シミュレーションする方が、それぞれの対象にあわせてテキトーに
修正してみてください。

感染は確率的に発生しますが、確率もテキトーです。
セルは、状態としては以下の状態を持つオートマトンになっています。
- 非感染
- 感染〜回復中
- 回復(免疫獲得)

## Description
単純2次元オートマトンです。
境界条件は周期的境界条件です。
隣接の8セルからの影響で確率的に感染します。

セルの状態は

|-------|----------------|
| 0     | 非感染         |
|-------|----------------|
| 15    | 回復(免疫獲得) |
|-------|----------------|
| 16-29 | 感染           |
|-------|----------------|

です。
感染者は1ステップごとに数値が1つ減り、15になると回復(免疫獲得)となります。
感染しているかどうかの判定は、15の剰余が0でなければ感染、と判定しています。以下に示すviruslife+1が回復となっています。
感染者数が0になると止まります。

初期状態にもよりますが、非感染のままで最後まで行く人がいますが、たぶんそれが「集団免疫」で守られた人だと思います。
初期状態は適当なのでオートマトンのサイズが小さいと誰も感染していない時があります。

防疫をしない(preventrate=1)だと、感染者数の増加が止められません。緊急事態宣言の意味がどういうものか判ると思います。



### パラメータ
#### msize
セルオートマトンの2次元格子の1辺のサイズです。msize×msizeの格子で実行します。

#### viruslife
感染から回復するまでの期間です。14にしています。14日で免疫を獲得する想定です。潜伏期間なしですが、潜伏中に感染力がある場合は潜伏期間も含めた数値で構わないです。

#### Nreproduction
再生産数。ウィルスの感染力を示す数値。新型コロナウィルスの東京での再生産数に合わせています。

#### isolationRate
隔離率? 感染率は 再生産数×隔離率( [基本再生産数] https://ja.wikipedia.org/wiki/%E5%9F%BA%E6%9C%AC%E5%86%8D%E7%94%9F%E7%94%A3%E6%95%B0 )で表すそうなので、その計算用。感染力をコントロールするには、この数値を変更してください。大きくすると感染しやすくなります。小さくすると感染しにくくなります。、、、これって隔離率なん?

#### infectrte
感染力?。 Nreproduction×isolationrate で計算される数値。感染するかどうかの判定に実際に使用している数値。

#### preventtime
防疫体制が変更れる時間。時間(elapsed)が、この数値になると、infectrate に preventrate が乗じられます。緊急事態宣言に相当するタイミングとでもいえるかな。。

#### preventrate
防疫効果率。防疫体制で感染力が何割になるかを示した数値。preventtime になると infectrate に乗じられます。isolationRate がどんだけ変化するかを示したもの、とも言えます。防疫しない場合は1です。

#### initialrate
初期状態でどれだけ感染者がいるかを示しています。



## Demo
防疫を4割減したものと9割減したものの例

<video width="320" height="240" controls>
  <source src="prevent_rate4.mp4" type="video/mp4">
</video>

<video width="320" height="240" controls>
  <source src="prevent_rate9.mp4" type="video/mp4">
</video>


## Requirement
- python3
  - numpy
  - scipy
  - matplotlib

## Usage

```
python corona.py
```

出力データは、時間、非感染者数、感染者数、回復者数、感染率 となっています。


## Install

Requirementに記載のモジュールを入れて実行してください。

```
pip install numpy
pip install scipy
pip install matplotlib
```



## License

GPL


## Author

[moto38] http://github.com/moto38
